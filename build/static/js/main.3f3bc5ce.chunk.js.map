{"version":3,"sources":["ViewTunnelClient.jsx","ViewInfo.jsx","InputSource.jsx","InputBufferDuration.jsx","VideoRateControl.jsx","StreamedianPlayer.jsx","index.js"],"names":["ViewTunnelClient","props","_this","Object","classCallCheck","this","_super","call","setSource","bind","assertThisInitialized","event","source","target","dataset","onClick","_this2","react_default","a","createElement","client","map","index","key","data-src","url","description","React","Component","ViewInfo","values","info","clients","ViewTunnelClient_ViewTunnelClient","InputSource","changeSource","setState","value","state","onChange","size","InputBufferDuration","changeDuration","className","duration","type","min","max","id","VideoRateControl","playbackRate","playbackRateText","video","updatePlaybackRate","livePlaybackRate","document","getElementById","nextProps","nestState","buffered","length","currentTime","end","step","StreamedianPlayer","bufferDuration","socket","window","location","host","redirectNativeMediaErrors","errorHandler","errHandler","infoHandler","infHandler","player","restart","changeBufferDuration","Streamedian","destroy","src","err","console","error","message","inf","ViewInfo_ViewInfo","InputSource_InputSource","InputBufferDuration_InputBufferDuration","controls","autoPlay","children","VideoRateControl_VideoRateControl","App","StreamedianPlayer_StreamedianPlayer","render","src_App"],"mappings":"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","file":"static/js/main.3f3bc5ce.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nexport default class ViewTunnelClient extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.setSource = this.setSource.bind(this);\r\n  }\r\n\r\n  setSource(event) {\r\n    let source = event.target.dataset['src'];\r\n    this.props.onClick(source);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        { this.props.client.map((source, index) =>\r\n           <button \r\n            key={index}\r\n            onClick={this.setSource}\r\n            data-src={source.url}>\r\n            {source.description}\r\n          </button>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}","import React from \"react\";\r\nimport ViewTunnelClient from \"./ViewTunnelClient\";\r\n\r\nexport default class ViewInfo extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        { Object.values(this.props.info.clients || []).map((client, index) =>\r\n          <ViewTunnelClient key={index} client={client} onClick={this.props.onClick} />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}","import React from \"react\";\r\n\r\nexport default class InputSource extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.changeSource = this.changeSource.bind(this);\r\n    this.setSource = this.setSource.bind(this);\r\n  }\r\n\r\n  changeSource(event) {\r\n    this.setState({source: event.target.value});\r\n  }\r\n\r\n  setSource(event) {\r\n    if (this.state) {\r\n      this.props.onClick(this.state.source);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <input  onChange={this.changeSource} size=\"36\" />\r\n        <button onClick={this.setSource}>Set</button>\r\n        <p>Enter your rtsp link to the stream, for example: \"rtsp://192.168.1.1:554/h264\"</p>\r\n      </div>\r\n    );\r\n  }\r\n}","import React from \"react\";\r\n\r\nexport default class InputBufferDuration extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.changeDuration = this.changeDuration.bind(this);\r\n  }\r\n  \r\n  changeDuration(event) {\r\n    this.props.onChange(event.target.value);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div>\r\n            <input\r\n              className=\"input\"\r\n              value={this.props.duration}\r\n              onChange={this.changeDuration}\r\n              type=\"range\" \r\n              min=\"10\" \r\n              max=\"200\" \r\n            />\r\n            <span id=\"buffer_value\">{this.props.duration}sec.</span>\r\n            <p>Change buffer duration</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}","import React from \"react\";\r\n\r\nexport default class VideoRateControl extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      playbackRate: 1.0,\r\n      playbackRateText: 'live',\r\n    }\r\n\r\n    this.video = null;\r\n    this.updatePlaybackRate = this.updatePlaybackRate.bind(this);\r\n    this.livePlaybackRate = this.livePlaybackRate.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.video = document.getElementById(this.props.video);\r\n    this.setState({playbackRate: this.video.playbackRate});\r\n    this.setState({playbackRateText: this.video.playbackRate});\r\n  }\r\n\r\n  componentWillUpdate(nextProps, nestState) {\r\n    this.video.playbackRate = this.state.playbackRate\r\n  }\r\n\r\n  updatePlaybackRate(event) {\r\n    this.setState({playbackRate: event.target.value});\r\n    this.setState({playbackRateText: event.target.value});\r\n  }\r\n\r\n  livePlaybackRate(event) {\r\n    this.setState({playbackRate: 1});\r\n    this.setState({playbackRateText: 'live'});\r\n    if (this.video.buffered.length) {\r\n      this.video.currentTime = this.video.buffered.end(0);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"controls form\">\r\n        <div>\r\n            Playback rate:&nbsp;\r\n            <input \r\n              className=\"input\"\r\n              value={this.state.playbackRate}\r\n              onChange={this.updatePlaybackRate}\r\n              type=\"range\" \r\n              min=\"0.5\" \r\n              max=\"5.0\" \r\n              step=\"0.5\"\r\n            />\r\n            <output>{this.state.playbackRateText}</output>\r\n        </div>\r\n        <div>\r\n            <button \r\n              className=\"btn btn-success\"\r\n              onClick={this.livePlaybackRate}\r\n            >live</button>\r\n        </div>\r\n    </div>\r\n    );\r\n  }\r\n}","import React from \"react\";\r\nimport ViewInfo from \"./ViewInfo\";\r\nimport InputSource from \"./InputSource\";\r\nimport InputBufferDuration from \"./InputBufferDuration\";\r\nimport VideoRateControl from \"./VideoRateControl\";\r\n\r\nexport default class StreamedianPlayer extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      bufferDuration: 30,\r\n      socket: \"ws://\" + window.location.host + \"/ws\",\r\n      redirectNativeMediaErrors: true,\r\n      errorHandler: this.errHandler.bind(this),\r\n      infoHandler: this.infHandler.bind(this),\r\n    };\r\n\r\n    this.player = null;\r\n    this.restart = this.restart.bind(this);\r\n    this.changeSource = this.changeSource.bind(this);\r\n    this.changeBufferDuration = this.changeBufferDuration.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.player = window.Streamedian.player(this.props.id, this.state);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.player.destroy();\r\n    this.player = null;\r\n  }\r\n\r\n  restart() {\r\n    this.player.player.src = this.state.source;\r\n    this.player.destroy();\r\n    this.player = null;\r\n    this.player = window.Streamedian.player(this.props.id, this.state);\r\n  }\r\n\r\n  changeSource(src) {\r\n    this.setState({ source: src }, () => {\r\n      this.restart();\r\n    });\r\n  }\r\n\r\n  changeBufferDuration(duration) {\r\n    this.setState({ bufferDuration: duration });\r\n  }\r\n\r\n  errHandler(err) {\r\n    console.error(err.message);\r\n  }\r\n\r\n  infHandler(inf) {\r\n    this.setState({ info: inf });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <ViewInfo info={this.state.info || []} onClick={this.changeSource} />\r\n        <InputSource onClick={this.changeSource} />\r\n        <InputBufferDuration\r\n          duration={this.state.bufferDuration}\r\n          onChange={this.changeBufferDuration}\r\n        />\r\n        <video id={this.props.id} controls autoPlay>\r\n          {this.props.children}\r\n        </video>\r\n        <VideoRateControl video={this.props.id} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport StreamedianPlayer from \"./StreamedianPlayer\";\nimport \"./index.css\";\n\nconst App = () => (\n  <div>\n    <StreamedianPlayer id=\"test_video\">\n      <source\n        src=\"rtsp://admin:1234@106.245.94.78:10010/profile0\"\n        type=\"application/x-rtsp\"\n      />\n    </StreamedianPlayer>\n  </div>\n);\n\nrender(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}